Write a detailed plan for implementing the AI Chatbot Training feature as a paid feature behind a paywall:

**Feature:** AI Chatbot Training
**Goal:** Allow users (influencers/administrators) to provide specific knowledge to train the "Ask Me Anything!" chatbot, making its responses more personalized and relevant to their persona and content.
**Status:** Planned (Paid Feature)

**Implementation Strategy: Placing the Feature Behind a Paywall**

1.  **Define Access Control:** Determine how paid access will be managed.
    - **Subscription Model:** Integrate a subscription service (e.g., using Stripe, Firebase Extensions for billing, or a custom implementation) to manage user subscriptions.
    - **User Roles/Permissions:** Introduce user roles (e.g., 'free', 'premium') or specific permissions linked to their subscription status.

2.  **Backend Implementation (Access Control & API Endpoints):**
    - **Authenticated Endpoints:** All backend API endpoints related to AI chatbot training (e.g., saving Q&A pairs, uploading documents for RAG) MUST be protected.
    - **Authorization Checks:** Implement checks in the backend (Cloud Functions) to verify the user's subscription status or permission before allowing access to these endpoints.
    - **Firestore Security Rules:** Update Firestore security rules to ensure that training data can only be accessed, written, or modified by the authenticated user who owns it, AND only if they have the necessary premium permission.

3.  **Frontend Implementation (UI & User Experience):**
    - **Feature Visibility:** Control the visibility of the AI training UI elements (buttons, forms, sections) based on the user's subscription status.
    - **Upgrade Prompt:** If a non-premium user tries to access the paid feature, display a clear message explaining that it's a premium feature and guide them to the subscription/upgrade page.
    - **Subscription Management UI:** Create UI components for users to manage their subscription (view status, upgrade, cancel).

4.  **Data Storage:**
    - **Firestore:** Store training data (Q&A pairs, document references, processed text chunks) in Firestore, ensuring it is linked to the specific user and protected by security rules.

5.  **AI Integration (with Paywall):**
    - **Conditional RAG:** Modify the backend's `/ai/ask-question-stream` endpoint.
    - Before fetching and including training data for RAG, check the user's subscription status.
    - Only include the personalized training data in the prompt if the user is a premium subscriber.
    - Free users will still receive responses based on the general Gemini model and the basic bio/name context.

6.  **Testing:**
    - Test the paywall logic thoroughly: verify that free users cannot access paid features and that premium users can.
    - Test the entire AI training workflow for premium users (adding data, checking if the chatbot uses the data in responses).
    - Test the fallback behavior for free users.

**Potential Future Enhancements:**
- Different tiers of premium access with varying training data limits or capabilities.
- Analytics on feature usage by free vs. premium users.

This plan ensures that the AI Chatbot Training feature is correctly implemented as a premium service, providing a clear distinction between free and paid functionality.
